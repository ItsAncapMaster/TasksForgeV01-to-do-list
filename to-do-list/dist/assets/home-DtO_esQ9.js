import{r as c,c as a,a as s,w as _,v as k,b as v,F as T,d as C,o as n,e as i,t as d}from"./index-BFsE8FqP.js";const y="/assets/close%20(1)-BSz-e2DU.png",E="/assets/quadrado%20(2)-DBJM_ueP.png",b="/assets/marca-de-verificacao%20(1)-B7CLoSKX.png",x="/assets/quadrado-C0y6EAWT.png",S="/assets/marca-cruzada-lH9PtfxE.png",$={class:"main-container"},B={class:"task-container"},j={class:"text-container"},w={class:"text"},z={key:0,class:"status-red"},A={key:1,class:"status-green"},D=["onClick"],L=["onClick"],P=["onClick"],M={__name:"home",setup(N){const m=c(null);c(null);const u=c([]),l=c("");function r(){u.value=[];const o=localStorage.getItem("token");fetch("http://localhost:8090/getTasks",{method:"GET",headers:{Authorization:`Bearer ${o}`}}).then(t=>t.json()).then(t=>{t.tasks.forEach(e=>{u.value.push(e)})}).catch(t=>console.log(t))}r();function f(){const o=localStorage.getItem("token");o||$router.push("/login"),fetch("http://localhost:8090/PostTasks",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({tarefa:l.value})}).then(t=>(console.log("Status da resposta:",t.status),t.json())).then(t=>{l.value="",r()}).catch(t=>{console.error("Erro ao criar tarefa:",t)})}function h(o){fetch(`http://localhost:8090/finishTasks/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{t.ok&&(l.value="",r())}).catch(t=>{console.error("Erro ao atualizar tarefa:",t)})}function g(o){fetch(`http://localhost:8090/deleteTasks/${o}`,{method:"DELETE"}).then(t=>t.json()).then(t=>{t.ok&&(l.value="",r())}).catch(t=>{console.log("deu erro"+t)})}return(o,t)=>(n(),a("div",$,[t[6]||(t[6]=s("h1",{class:"title"},"CREATE TASK",-1)),s("div",{class:"modal",ref_key:"modal",ref:m},[_(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),placeholder:"create new"},null,512),[[k,l.value]]),s("button",{onClick:t[1]||(t[1]=e=>f()),class:"btn-create"},t[2]||(t[2]=[v("create",-1),s("img",{src:y,alt:"",class:"img-create"},null,-1)]))],512),(n(!0),a(T,null,C(u.value,e=>(n(),a("div",B,[s("div",j,[s("p",w,d(e.titulo),1)]),e.status!=="concluida"?(n(),a("p",z,d(e.status),1)):i("",!0),e.status==="concluida"?(n(),a("p",A,d(e.status),1)):i("",!0),e.status&&e.status.trim().toLowerCase()==="concluida"?(n(),a("button",{key:2,onClick:p=>h(e.id),class:"btn-check"},t[3]||(t[3]=[s("img",{src:E,alt:"",class:"border-check"},null,-1),s("img",{src:b,alt:"",class:"v-check"},null,-1)]),8,D)):i("",!0),e.status&&e.status.trim().toLowerCase()!=="concluida"?(n(),a("button",{key:3,onClick:p=>h(e.id),class:"btn-check"},t[4]||(t[4]=[s("img",{src:x,alt:"",class:"img-nc"},null,-1)]),8,L)):i("",!0),s("button",{onClick:p=>g(e.id),class:"btn-delete"},t[5]||(t[5]=[s("img",{src:S,alt:""},null,-1)]),8,P)]))),256))]))}};export{M as default};
